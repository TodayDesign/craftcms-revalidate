{% import "_includes/forms" as forms %}

<div class="content">
  <!-- Global revalidate -->
  <h2>General</h2>
  <form style="margin-bottom:4px;" method="post" accept-charset="UTF-8">
    {{ csrfInput() }}
    <select name="action" style="padding: 5px; margin-bottom:20px; border:1px solid var(--medium-hairline-color)">
      <option value="revalidate/revalidate/deploy" selected>Deploy site and rebuild redirects</option>
      <option value="revalidate/revalidate/revalidate-all">Clear page cache</option>
      <option value="revalidate/revalidate/revalidate-site-data">Clear global and navigation cache</option>
    </select>
    <br>
    <input type="submit" class="btn submit" value="Submit">
  </form>

  <!-- Revalidate paths -->
  <h2 style="margin-top:40px">Revalidate paths</h2>
  <div style="margin: 10px 0;">
    <form class="utility" method="post" accept-charset="UTF-8">
      {{ actionInput('revalidate/revalidate/revalidate-paths') }}
      {{ redirectInput('utilities/revalidate') }}
      {{ csrfInput() }}

      <!-- TODO: add site select option for multisite -->
      <input type="hidden" name="siteUrl" value="{{ siteUrl() }}">

      {{ forms.editableTableField({
        name: 'paths',
        id: 'paths',
        cols: [{
            type: 'singleline',
            heading: 'Paths',
            placeholder: '/page',
            code: true,
        }],
        addRowLabel: "Add a path",
        allowAdd: true,
        allowDelete: true,
        allowReorder: true,
        first: true,
      }) }}
      <input type="submit" class="btn submit" value="Submit">
    </form>
  </div>

  <!-- Revalidate tags -->
  <h2 style="margin-top:40px">Revalidate tags</h2>
  <div style="margin: 10px 0;">
    <form class="utility" method="post" accept-charset="UTF-8">
      {{ actionInput('revalidate/revalidate/revalidate-tags') }}
      {{ redirectInput('utilities/revalidate') }}
      {{ csrfInput() }}


      <!-- TODO: add site select option for multisite -->
      <input type="hidden" name="siteUrl" value="{{ siteUrl() }}">

      {{ forms.editableTableField({
          name: 'tags',
          id: 'tags',
          cols: [{
              type: 'singleline',
              heading: 'Tags',
              placeholder: 'site-data',
              code: true,
          }],
          addRowLabel: "Add a tag",
          allowAdd: true,
          allowDelete: true,
          allowReorder: true,
          first: true,
      }) }}
      <input type="submit" class="btn submit" value="Submit">
    </form>
  </div>

</div>
